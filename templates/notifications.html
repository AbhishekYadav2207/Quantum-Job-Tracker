<!-- [file name]: templates/notifications.html -->
<!-- [file content begin] -->
{% extends "base.html" %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="bi bi-bell"></i> Notifications</h2>
    {% if user_id %}
    <span class="badge bg-info">User: {{ user_id[:8] }}...</span>
    {% endif %}
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-header">
      <h5 class="card-title mb-0">Notification Settings</h5>
    </div>
    <div class="card-body">
      <form>
        <div class="row">
          <div class="col-md-6">
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
              <label class="form-check-label" for="emailNotifications">Email Notifications</label>
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="slackNotifications">
              <label class="form-check-label" for="slackNotifications">Slack Notifications</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="jobCompleted" checked>
              <label class="form-check-label" for="jobCompleted">Job Completed</label>
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="jobFailed" checked>
              <label class="form-check-label" for="jobFailed">Job Failed</label>
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="statusChange" checked>
              <label class="form-check-label" for="statusChange">Status Changes</label>
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Save Settings</button>
      </form>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="card-title mb-0">Notification History</h5>
      <button class="btn btn-sm btn-outline-secondary">Mark All as Read</button>
    </div>
    <div class="card-body p-0">
      {% if notifications %}
      <div class="list-group list-group-flush">
        {% for notification in notifications %}
        <div class="list-group-item {% if not notification.read %}bg-light{% endif %}">
          <div class="d-flex justify-content-between align-items-start">
            <div class="flex-grow-1">
              <h6 class="mb-1">{{ notification.title }}</h6>
              <p class="mb-1">{{ notification.message }}</p>
              <small class="text-muted">{{ notification.timestamp }}</small>
              {% if notification.job_info %}
              <div class="mt-2">
                <small>
                  Job: <code>{{ notification.job_info.job_id }}</code> |
                  Backend: {{ notification.job_info.backend }} |
                  Status: <span class="badge bg-{{ notification.job_info.status_class }}">
                    {{ notification.job_info.status }}
                  </span>
                </small>
              </div>
              {% endif %}
            </div>
            {% if not notification.read %}
            <span class="badge bg-primary ms-2">New</span>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="text-center py-5">
        <i class="bi bi-bell-slash display-4 text-muted"></i>
        <p class="text-muted mt-3">No notifications yet</p>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
<!-- [file content end] -->